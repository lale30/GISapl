<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Naselja – filter po opštini</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
  <style>
    body { margin:0; padding:0; font-family:Arial; }
    #map { height: 90vh; }
    #panel { padding:10px; background:#eee; }
    input { padding:5px; }
    button { padding:5px 10px; }
  </style>
</head>
<body>

<div id="panel">
  <label>Unesi naziv opštine: </label>
  <input type="text" id="opstinaInput" placeholder="npr. Beograd">
  <button onclick="reloadLayer()">Prikaži</button>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const map = L.map('map').setView([44.7, 20.5], 8);

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

  let wmsLayer = null;

  function reloadLayer() {
    const opstina = document.getElementById("opstinaInput").value;

    if (wmsLayer) map.removeLayer(wmsLayer);

    wmsLayer = L.tileLayer.wms("http://localhost:8080/geoserver/myworkspace/wms", {
      layers: "graniceAmazona",   // promeni po želji
      format: "image/png",
      transparent: true,
      viewparams: `opstina:${opstina}`
    }).addTo(map);
  }
</script>

</body>
</html>
